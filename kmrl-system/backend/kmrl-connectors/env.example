# KMRL Connectors Environment Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# CORE SYSTEM CONFIGURATION
# =============================================================================

# Redis Configuration (Required)
REDIS_URL=redis://localhost:6379

# API Gateway Configuration
API_ENDPOINT=http://localhost:3000
API_KEY=kmrl-api-key-2024

# OAuth2 Redirect Port (for Google APIs)
OAUTH2_REDIRECT_PORT=8080

# =============================================================================
# GMAIL CONNECTOR CONFIGURATION
# =============================================================================

# Gmail API Configuration
# Note: You need to create a Google Cloud Project and enable Gmail API
# Download credentials.json from Google Cloud Console
# The connector will automatically handle OAuth2 authentication

# Gmail API Settings (Optional - defaults will be used)
GMAIL_MAX_RESULTS=50
GMAIL_QUERY_FILTER=has:attachment

# =============================================================================
# GOOGLE DRIVE CONNECTOR CONFIGURATION
# =============================================================================

# Google Drive API Configuration
# Note: Uses the same credentials.json as Gmail connector
# You need to enable Google Drive API in your Google Cloud Project

# Google Drive Settings
GOOGLE_DRIVE_FOLDER_ID=
SKIP_GOOGLE_DOCS=true

# =============================================================================
# MAXIMO CONNECTOR CONFIGURATION
# =============================================================================

# Maximo API Configuration (Required for Maximo connector)
MAXIMO_BASE_URL=https://your-maximo-instance.com
MAXIMO_USERNAME=your_maximo_username
MAXIMO_PASSWORD=your_maximo_password
MAXIMO_API_VERSION=v1

# Maximo Sync Settings
MAXIMO_WO_STATUSES=WAPPR,INPRG,COMP
MAXIMO_INCLUDE_ATTACHMENTS=true

# =============================================================================
# WHATSAPP CONNECTOR CONFIGURATION
# =============================================================================

# WhatsApp Cloud API Configuration (Required for WhatsApp connector)
# Note: You need to create a WhatsApp Business Account and get API access
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_ACCESS_TOKEN=your_access_token
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your_webhook_verify_token
WHATSAPP_API_VERSION=v18.0

# WhatsApp Sync Settings
WHATSAPP_INCLUDE_MEDIA=true
WHATSAPP_INCLUDE_TEXT=true
WHATSAPP_TARGET_NUMBERS=+1234567890,+0987654321

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration (for main application)
DATABASE_URL=postgresql://kmrl_user:kmrl_password@localhost:5432/kmrl_db

# =============================================================================
# OBJECT STORAGE CONFIGURATION
# =============================================================================

# MinIO Configuration (for file storage)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=kmrl-documents

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================

# OpenSearch Configuration (for document embeddings)
OPENSEARCH_URL=http://localhost:9200
OPENSEARCH_USER=admin
OPENSEARCH_PASSWORD=admin

# =============================================================================
# AI/ML CONFIGURATION
# =============================================================================

# OpenAI Configuration (for document processing)
OPENAI_API_KEY=your_openai_api_key

# =============================================================================
# OCR CONFIGURATION
# =============================================================================

# Tesseract OCR Configuration
TESSERACT_PATH=/usr/bin/tesseract

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Log File Path
LOG_FILE=logs/connectors.log

# =============================================================================
# SYNC CONFIGURATION
# =============================================================================

# Sync Intervals (in minutes)
GMAIL_SYNC_INTERVAL=2
GDRIVE_SYNC_INTERVAL=2
MAXIMO_SYNC_INTERVAL=2
WHATSAPP_SYNC_INTERVAL=2

# Batch Sizes
DEFAULT_BATCH_SIZE=50
HISTORICAL_BATCH_SIZE=100

# Historical Sync Limits
MAX_HISTORICAL_DAYS=30
MAX_HISTORICAL_DOCUMENTS=1000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Secret (for API authentication)
JWT_SECRET=your-jwt-secret-key

# Encryption Key (for sensitive data)
ENCRYPTION_KEY=your-encryption-key

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health Check Settings
HEALTH_CHECK_INTERVAL=60

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Mode
DEBUG=false

# Test Mode (uses mock data)
TEST_MODE=false

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379
CELERY_RESULT_BACKEND=redis://localhost:6379
CELERY_TIMEZONE=Asia/Kolkata

# =============================================================================
# EXAMPLES AND SETUP NOTES
# =============================================================================

# Example Gmail Configuration:
# 1. Go to Google Cloud Console
# 2. Create a new project or select existing
# 3. Enable Gmail API and Google Drive API
# 4. Create credentials (OAuth 2.0 Client ID)
# 5. Download credentials.json to this directory
# 6. Run the connector - it will open browser for OAuth

# Example Maximo Configuration:
# 1. Get Maximo instance URL
# 2. Create API user with appropriate permissions
# 3. Test connection using Maximo REST API
# 4. Configure work order statuses to monitor

# Example WhatsApp Configuration:
# 1. Create WhatsApp Business Account
# 2. Get phone number ID and access token
# 3. Set up webhook endpoint
# 4. Configure message types to process

# Security Notes:
# - Never commit .env file to version control
# - Use strong passwords and API keys
# - Rotate credentials regularly
# - Enable 2FA where possible
